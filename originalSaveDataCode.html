<script>
    document.addEventListener("DOMContentLoaded", () => {
      //gets form info
      const form = document.getElementById("matchForm");
      const table = document.getElementById("matchTable").getElementsByTagName("tbody")[0];

      // show saved matches from before
      let savedMatches = localStorage.getItem("matches");
      if (savedMatches) {
        savedMatches = JSON.parse(savedMatches); //turns string back into array

        for (let i = 0; i < savedMatches.length; i++) {
          const match = savedMatches[i];
          AddMatch(match.teamA, match.teamB, match.matchTime, false);
        }
      }
      
      form.addEventListener("submit", function(event) {
        event.preventDefault();
        AddMatch();
      });

    function AddMatch(teamAInput, teamBInput, matchTimeInput, save=true) {
      // gets individual info from form
      const teamA = teamAInput || document.getElementById("teamA").value;
      const teamB = teamBInput || document.getElementById("teamB").value;
      const matchTime = matchTimeInput || document.getElementById("matchTime").value;

      // putting info together
      const newRow = table.insertRow();
      const teamsCell = newRow.insertCell(0);
      const timeCell = newRow.insertCell(1);
      const statusCell = newRow.insertCell(2);

      // 'team vs team' cell format
      teamsCell.textContent = "Team "+ teamA + " vs " + "Team " + teamB;

      // setting date and time
      const dates = new Date(matchTime);
      const options = { month: 'long', day: 'numeric', year: 'numeric', hour: 'numeric', minute: 'numeric' };
      timeCell.textContent = dates.toLocaleString('en-US', options);

      // setting status of match
      statusCell.textContent = "Upcoming";
      newRow.className = "upcoming";

      // save match data 
      if (save) {
        let matches = localStorage.getItem("matches");
        if (matches) {
          matches = JSON.parse(matches);  
        } else {
          matches = [];  
        }
        // add new match to array
        matches.push({ teamA: teamA, teamB: teamB, matchTime: matchTime });
        
        // save to localStorage as string
        localStorage.setItem("matches", JSON.stringify(matches));

        form.reset();
      }
    }    
   });
  </script>